<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: PWMDriver Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classPWMDriver-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PWMDriver Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>PWM driver class.  
 <a href="classPWMDriver.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ServoControllerDriver_8h_source.html">ServoControllerDriver.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a103dca66c9409beb103ffc6a2bc69a74"><td class="memItemLeft" align="right" valign="top"><a id="a103dca66c9409beb103ffc6a2bc69a74"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>PWMDriver</b> (hwlib::i2c_bus &amp;bus, uint8_t address=0x40)</td></tr>
<tr class="separator:a103dca66c9409beb103ffc6a2bc69a74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad04b5d0815c1d37934ea7f94a04cfe37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#ad04b5d0815c1d37934ea7f94a04cfe37">begin</a> (void)</td></tr>
<tr class="memdesc:ad04b5d0815c1d37934ea7f94a04cfe37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to start the PCA9685 chip.  <a href="#ad04b5d0815c1d37934ea7f94a04cfe37">More...</a><br /></td></tr>
<tr class="separator:ad04b5d0815c1d37934ea7f94a04cfe37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3df1a36b697cb9297676a30d1ebeecd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#a3df1a36b697cb9297676a30d1ebeecd3">reset</a> (void)</td></tr>
<tr class="memdesc:a3df1a36b697cb9297676a30d1ebeecd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to reset the mode of the PCA9685 chip.  <a href="#a3df1a36b697cb9297676a30d1ebeecd3">More...</a><br /></td></tr>
<tr class="separator:a3df1a36b697cb9297676a30d1ebeecd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae594f58413fa3e879f3038b8aa5c6027"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#ae594f58413fa3e879f3038b8aa5c6027">minMaxServo</a> (uint16_t <a class="el" href="classPWMDriver.html#aae39ea3ebac1a2b9724b7319b203230e">min</a>, uint16_t max)</td></tr>
<tr class="memdesc:ae594f58413fa3e879f3038b8aa5c6027"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets minimum and maximum values for degree mapping.  <a href="#ae594f58413fa3e879f3038b8aa5c6027">More...</a><br /></td></tr>
<tr class="separator:ae594f58413fa3e879f3038b8aa5c6027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae39ea3ebac1a2b9724b7319b203230e"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#aae39ea3ebac1a2b9724b7319b203230e">min</a> (uint16_t a, uint16_t b)</td></tr>
<tr class="memdesc:aae39ea3ebac1a2b9724b7319b203230e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Help-Function that returns the lowest value.  <a href="#aae39ea3ebac1a2b9724b7319b203230e">More...</a><br /></td></tr>
<tr class="separator:aae39ea3ebac1a2b9724b7319b203230e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16751ee4ff51c2deda6f9c4efbc8c869"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#a16751ee4ff51c2deda6f9c4efbc8c869">floor</a> (float val)</td></tr>
<tr class="memdesc:a16751ee4ff51c2deda6f9c4efbc8c869"><td class="mdescLeft">&#160;</td><td class="mdescRight">Help-Function that floors a float value.  <a href="#a16751ee4ff51c2deda6f9c4efbc8c869">More...</a><br /></td></tr>
<tr class="separator:a16751ee4ff51c2deda6f9c4efbc8c869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1afb5b4d6bf18bb2c4b591f310a149"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#a9f1afb5b4d6bf18bb2c4b591f310a149">map</a> (long x, long in_min, long in_max, long out_min, long out_max)</td></tr>
<tr class="memdesc:a9f1afb5b4d6bf18bb2c4b591f310a149"><td class="mdescLeft">&#160;</td><td class="mdescRight">Help-Function to map one long between 2 values.  <a href="#a9f1afb5b4d6bf18bb2c4b591f310a149">More...</a><br /></td></tr>
<tr class="separator:a9f1afb5b4d6bf18bb2c4b591f310a149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeded52492e2cf39770492d71fd3b161"><td class="memItemLeft" align="right" valign="top"><a id="aaeded52492e2cf39770492d71fd3b161"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#aaeded52492e2cf39770492d71fd3b161">degToPwm</a> (float deg)</td></tr>
<tr class="memdesc:aaeded52492e2cf39770492d71fd3b161"><td class="mdescLeft">&#160;</td><td class="mdescRight">function that maps degrees to pulse width <br /></td></tr>
<tr class="separator:aaeded52492e2cf39770492d71fd3b161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae52eb9cef15ce7bec9acef557e08f47e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#ae52eb9cef15ce7bec9acef557e08f47e">setPWMFreq</a> (float freq)</td></tr>
<tr class="memdesc:ae52eb9cef15ce7bec9acef557e08f47e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set the frequency (Hz) of the PCA9685 chip.  <a href="#ae52eb9cef15ce7bec9acef557e08f47e">More...</a><br /></td></tr>
<tr class="separator:ae52eb9cef15ce7bec9acef557e08f47e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c94a2f5ea34ba2cd3af6b589b82590c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#a5c94a2f5ea34ba2cd3af6b589b82590c">setPWM</a> (uint8_t num, uint16_t on, uint16_t off)</td></tr>
<tr class="memdesc:a5c94a2f5ea34ba2cd3af6b589b82590c"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to set PWM for given pin num  <a href="#a5c94a2f5ea34ba2cd3af6b589b82590c">More...</a><br /></td></tr>
<tr class="separator:a5c94a2f5ea34ba2cd3af6b589b82590c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2046fc4de1b6000aa02d3fb4eae8a3e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPWMDriver.html#a2046fc4de1b6000aa02d3fb4eae8a3e9">setPin</a> (uint8_t num, uint16_t val, bool invert=false)</td></tr>
<tr class="memdesc:a2046fc4de1b6000aa02d3fb4eae8a3e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">funtion that sets the pwm for a single pin  <a href="#a2046fc4de1b6000aa02d3fb4eae8a3e9">More...</a><br /></td></tr>
<tr class="separator:a2046fc4de1b6000aa02d3fb4eae8a3e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PWM driver class. </p>
<p>This class has all the needed functions to set the PWM pulse signals on the PCA9685 chip. It also includes some functions to help with calculations such as degree mapping to pulse widths. To create the class you need to give it an i2c_bus na dits address (default is 0x40) </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad04b5d0815c1d37934ea7f94a04cfe37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad04b5d0815c1d37934ea7f94a04cfe37">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PWMDriver::begin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to start the PCA9685 chip. </p>
<p>Resets all the setting son the chip and sets a frequency usable for servos </p>

</div>
</div>
<a id="a16751ee4ff51c2deda6f9c4efbc8c869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16751ee4ff51c2deda6f9c4efbc8c869">&#9670;&nbsp;</a></span>floor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t PWMDriver::floor </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Help-Function that floors a float value. </p>
<p>casts a float to an interger to round it and then returns it if it is lower than the original float else -1 </p>

</div>
</div>
<a id="a9f1afb5b4d6bf18bb2c4b591f310a149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f1afb5b4d6bf18bb2c4b591f310a149">&#9670;&nbsp;</a></span>map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long PWMDriver::map </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>in_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>in_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>out_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>out_max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Help-Function to map one long between 2 values. </p>
<p>Re-maps a number from one range to another </p>

</div>
</div>
<a id="aae39ea3ebac1a2b9724b7319b203230e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae39ea3ebac1a2b9724b7319b203230e">&#9670;&nbsp;</a></span>min()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PWMDriver::min </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Help-Function that returns the lowest value. </p>
<p>Returns lowest value </p>

</div>
</div>
<a id="ae594f58413fa3e879f3038b8aa5c6027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae594f58413fa3e879f3038b8aa5c6027">&#9670;&nbsp;</a></span>minMaxServo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PWMDriver::minMaxServo </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets minimum and maximum values for degree mapping. </p>
<p>This functions is for the minimum and maximum pulse widths of your servos of choice Some servos have a lower minimum value or a higher maximum and this way you can edit those so your servos dont break or wear down after a while </p>

</div>
</div>
<a id="a3df1a36b697cb9297676a30d1ebeecd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3df1a36b697cb9297676a30d1ebeecd3">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PWMDriver::reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to reset the mode of the PCA9685 chip. </p>
<p>Writes the reset signal to the mode register and waits 10 ms for it to be done </p>

</div>
</div>
<a id="a2046fc4de1b6000aa02d3fb4eae8a3e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2046fc4de1b6000aa02d3fb4eae8a3e9">&#9670;&nbsp;</a></span>setPin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PWMDriver::setPin </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>invert</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>funtion that sets the pwm for a single pin </p>
<p>This function calculates the timings for the setPWM function and inserts them into it Invert can be used to flip the pulse signal horizontaly so that instead of it starting high it starts low </p>

</div>
</div>
<a id="a5c94a2f5ea34ba2cd3af6b589b82590c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c94a2f5ea34ba2cd3af6b589b82590c">&#9670;&nbsp;</a></span>setPWM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PWMDriver::setPWM </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to set PWM for given pin num </p>
<p>This funcion sets the pulse width of the given pin on refers to the timing when to signal is meant to be on and off is when the signal should be turned off </p>

</div>
</div>
<a id="ae52eb9cef15ce7bec9acef557e08f47e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae52eb9cef15ce7bec9acef557e08f47e">&#9670;&nbsp;</a></span>setPWMFreq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PWMDriver::setPWMFreq </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to set the frequency (Hz) of the PCA9685 chip. </p>
<p>This functions sets the update frequency of the chip not all pwm driven devices work on the same frequency normal servos work best on 50Hz for Leds you want a higher frequency to reduce stutter </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ServoControllerDriver_8h_source.html">ServoControllerDriver.h</a></li>
<li><a class="el" href="ServoControllerDriver_8cpp.html">ServoControllerDriver.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
